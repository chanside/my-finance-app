<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>理財小幫手</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
<div class="container">
<!-- 側邊選單 -->
<nav id="sideMenu" class="side-menu">
  <div class="side-header">
    <h2>選單</h2>
    <button id="closeMenu">&times;</button>
  </div>
  <ul>
    <li><a href="/">首頁</a></li>
    <li><a href="WeeklyTask.html">每周任務</a></li>
    <li><a href="Quiz.html">知識問答</a></li>
  </ul>
</nav>

<!-- 遮罩 -->
<div id="overlay" class="overlay"></div>

<!-- 漢堡按鈕 (加到 header.title 裡) -->
<button id="menuBtn" class="menu-btn">&#9776;</button>

  <!-- ===== 頁首 ===== -->
  <header>
    <div class="title">
      <div class="logo">$</div>
      <h1>理財小幫手</h1>
    </div>
    <div class="header-actions">
     
<div id="qr-reader" style="width:300px; display:none;"></div>
<button id="qrBtn">開啟 QR 掃描</button>
<button id="switch-camera-btn" style="display:none;">切換相機</button>

      <button id="exportBtn" class="primary">匯出資料</button>
      <button id="importBtn" class="primary">匯入資料</button>
      <input type="file" id="fileInput" accept="application/json" hidden>
      <button id="resetBtn" class="primary">重置資料</button>
    </div>
  </header>

  <!-- ===== 摘要卡片 ===== -->
  <div class="grid cards">
    <div class="card">
      <h3>可支配餘額</h3>
      <div class="money" id="balance">$0</div>
      <div class="muted">包含本月收入與支出</div>
    </div>
    <div class="card">
      <h3>本月收入</h3>
      <div class="money good" id="income">$0</div>
      <div class="muted" id="incomeCount">0 筆</div>
    </div>
    <div class="card">
      <h3>本月支出</h3>
      <div class="money bad" id="expense">$0</div>
      <div class="muted" id="expenseCount">0 筆</div>
    </div>
    <div class="card">
      <h3>個人儲蓄率</h3>
      <div class="money warn" id="savingRate">0%</div>
      <div class="muted">儲蓄金額 / 可支配收入 × 100%</div>
    </div>
  </div>

  <!-- ===== 主內容區 ===== -->
  <div class="panel">

    <!-- 新增交易與交易紀錄 -->
    <div class="card">
      <div class="section-title"><h2>新增交易</h2></div>
      <div class="form-row">
        <label>日期<input type="date" id="txDate"></label>
        <label>類型
          <select id="txType">
            <option value="收入">收入</option>
            <option value="支出">支出</option>
          </select>
        </label>
        <label>金額<input type="number" id="txAmount" placeholder="例如 1200"></label>
        <label>分類
          <input list="catList" id="txCategory" placeholder="例如 餐飲"/>
          <datalist id="catList">
            <option>餐飲</option><option>交通</option><option>娛樂</option>
            <option>房租</option><option>購物</option><option>薪資</option>
            <option>投資</option><option>醫療</option>
          </datalist>
        </label>
        <label>備註<input id="txNote" placeholder="可留空"></label>
        <label><button class="primary" id="addBtn">加入</button></label>
      </div>

      <div class="section-title"><h2>交易紀錄</h2></div>
      <div class="form-actions">
        <input id="searchKey" placeholder="關鍵字搜尋 (分類/備註)">
      </div>
      <table class="table" id="txTable">
        <thead>
          <tr>
            <th>日期</th><th>類型</th><th>分類</th><th>備註</th><th>金額</th><th></th>
          </tr>
        </thead>
        <tbody id="txTbody"></tbody>
      </table>
    </div>

    <!-- 預算 / 圖表 / 儲蓄目標 -->
    <div class="card">
      <div class="section-title"><h2>預算設置</h2></div>
      <div class="form-actions">
        <input id="budgetCat" placeholder="分類，如 餐飲">
        <input id="budgetAmt" type="number" min="0" step="0.01" placeholder="每月預算">
        <button id="setBudget">設定/更新</button>
      </div>
      <div id="budgetList"></div>

      <div class="section-title" style="margin-top:15px"><h2>月度收支圖表</h2></div>
      <canvas id="chartCanvas"></canvas>

      <div class="section-title" style="margin-top:15px"><h2>儲蓄目標</h2></div>
      <div class="form-actions">
        <input id="goalName" placeholder="目標名稱">
        <input id="goalTarget" type="number" min="0" step="0.01" placeholder="目標金額">
        <button id="addGoal">新增目標</button>
      </div>
      <div id="goalList"></div>
    </div>

  </div>
</div>
  <script>
(function(){if(!window.chatbase||window.chatbase("getState")!=="initialized"){window.chatbase=(...arguments)=>{if(!window.chatbase.q){window.chatbase.q=[]}window.chatbase.q.push(arguments)};window.chatbase=new Proxy(window.chatbase,{get(target,prop){if(prop==="q"){return target.q}return(...args)=>target(prop,...args)}})}const onLoad=function(){const script=document.createElement("script");script.src="https://www.chatbase.co/embed.min.js";script.id="zU41hSWsbfHyI-xOQMIKE";script.domain="www.chatbase.co";document.body.appendChild(script)};if(document.readyState==="complete"){onLoad()}else{window.addEventListener("load",onLoad)}})();
</script>
<!-- ===== QR Scanner 容器 ===== -->
<div id="qrScanner" style="display:none; margin-top:15px; text-align:center;">
  <div id="qr-reader"></div>
  <div id="qrResult" style="margin-top:10px; color:#4a90e2;"></div>
  <button id="switch-camera-btn" style="display:none;">切換鏡頭</button>
</div>  

<!-- ===== JS 引用 ===== -->
<script src="QRCODE.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://unpkg.com/html5-qrcode"></script>
<script src="script.js"></script>
<script src="ImportExport.js"></script>
<script src="SideMenu.js"></script>
</body>
</html>